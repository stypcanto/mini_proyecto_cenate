package com.styp.cenate.api.mbac;

import com.styp.cenate.dto.mbac.PaginaModuloPermisosResponse;
import com.styp.cenate.service.view.PermisoActivoViewService;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import lombok.RequiredArgsConstructor;
import org.springframework.web.bind.annotation.*;

import java.util.List;

/**
 * ðŸŽ¯ Controlador para obtener los permisos activos de un usuario segÃºn su ID.
 *
 * Endpoint: GET /api/mbac/permisos-activos/{idUser}
 * Retorna una lista de pÃ¡ginas con sus permisos disponibles (ver, crear, editar, etc.).
 *
 * ðŸ“¦ Capa: API â†’ MBAC
 * ðŸ§± Servicio: PermisoActivoViewService
 */
@RestController
@RequestMapping("/api/mbac/permisos-activos")
@RequiredArgsConstructor
public class PermisosActivosController {

    // ðŸ§­ Logger SLF4J estÃ¡ndar
    private static final Logger log = LoggerFactory.getLogger(PermisosActivosController.class);

    private final PermisoActivoViewService permisoActivoViewService;

    /**
     * ðŸ”¹ Obtiene los permisos activos del usuario especificado.
     *
     * @param idUser ID del usuario
     * @return Lista de permisos por pÃ¡gina y mÃ³dulo
     */
    @GetMapping("/{idUser}")
    public List<PaginaModuloPermisosResponse> obtenerPermisosPorUsuario(@PathVariable Long idUser) {
        log.info("ðŸ§© Solicitando permisos activos del usuario con ID: {}", idUser);
        return permisoActivoViewService.obtenerPermisosActivosPorUsuario(idUser);
    }
}