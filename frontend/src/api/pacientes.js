// ========================================================================
// üß¨ API PACIENTES / ASEGURADOS - CENATE
// ========================================================================
// Endpoints para la gesti√≥n de asegurados: listado, b√∫squeda por ID y documento.

import { API_BASE, getHeaders, handleResponse } from "../config/api";

/**
 * üìã Obtiene una lista paginada de asegurados
 * @param {number} page - P√°gina actual (por defecto 0)
 * @param {number} size - Tama√±o de p√°gina (por defecto 10)
 */
export const getAsegurados = async (page = 0, size = 10) => {
    try {
        const res = await fetch(`${API_BASE}/asegurados?page=${page}&size=${size}`, {
            method: "GET",
            headers: getHeaders(true),
        });
        return await handleResponse(res);
    } catch (error) {
        console.error("‚ùå Error obteniendo asegurados:", error);
        throw error;
    }
};

/**
 * üîç Obtiene un asegurado por su ID
 * @param {string|number} pkAsegurado - ID del asegurado
 */
export const getAseguradoById = async (pkAsegurado) => {
    try {
        const res = await fetch(`${API_BASE}/asegurados/id/${pkAsegurado}`, {
            method: "GET",
            headers: getHeaders(true),
        });
        return await handleResponse(res);
    } catch (error) {
        console.error(`‚ùå Error obteniendo asegurado por ID (${pkAsegurado}):`, error);
        throw error;
    }
};

/**
 * ü™™ Obtiene un asegurado por n√∫mero de documento
 * @param {string|number} docPaciente - DNI u otro documento
 */
export const getAseguradoByDoc = async (docPaciente) => {
    try {
        const res = await fetch(`${API_BASE}/asegurados/doc/${docPaciente}`, {
            method: "GET",
            headers: getHeaders(true),
        });
        return await handleResponse(res);
    } catch (error) {
        console.error(`‚ùå Error obteniendo asegurado por documento (${docPaciente}):`, error);
        throw error;
    }
};