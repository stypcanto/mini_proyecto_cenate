// ========================================================================
// üìÑ API DE TIPOS DE DOCUMENTO - CENATE
// ========================================================================

import { API_BASE, getHeaders, handleResponse } from "@/lib/apiClient"; // ‚öôÔ∏è usa ruta relativa, no alias "@/"

// ========================================================================
// üßæ FUNCIONES CRUD DE TIPOS DE DOCUMENTO
// ========================================================================

/**
 * üìã Obtiene todos los tipos de documento
 */
export const getTiposDocumento = async () => {
  try {
    const response = await fetch(`${API_BASE}/tipos-documento`, {
      method: "GET",
      headers: getHeaders(true),
    });
    return await handleResponse(response);
  } catch (error) {
    console.error("‚ùå Error obteniendo tipos de documento:", error);
    throw error;
  }
};

/**
 * üîç Obtiene un tipo de documento por ID
 * @param {number|string} id - ID del tipo de documento
 */
export const getTipoDocumentoById = async (id) => {
  try {
    const response = await fetch(`${API_BASE}/tipos-documento/${id}`, {
      method: "GET",
      headers: getHeaders(true),
    });
    return await handleResponse(response);
  } catch (error) {
    console.error(`‚ùå Error obteniendo tipo de documento ${id}:`, error);
    throw error;
  }
};

/**
 * ‚ûï Crea un nuevo tipo de documento
 * @param {object} tipoDocumentoData - Datos del tipo de documento
 */
export const createTipoDocumento = async (tipoDocumentoData) => {
  try {
    const response = await fetch(`${API_BASE}/tipos-documento`, {
      method: "POST",
      headers: getHeaders(true),
      body: JSON.stringify(tipoDocumentoData),
    });
    return await handleResponse(response);
  } catch (error) {
    console.error("‚ùå Error creando tipo de documento:", error);
    throw error;
  }
};

/**
 * ‚úèÔ∏è Actualiza un tipo de documento existente
 * @param {number|string} id - ID del tipo de documento
 * @param {object} tipoDocumentoData - Datos actualizados
 */
export const updateTipoDocumento = async (id, tipoDocumentoData) => {
  try {
    const response = await fetch(`${API_BASE}/tipos-documento/${id}`, {
      method: "PUT",
      headers: getHeaders(true),
      body: JSON.stringify(tipoDocumentoData),
    });
    return await handleResponse(response);
  } catch (error) {
    console.error(`‚ùå Error actualizando tipo de documento ${id}:`, error);
    throw error;
  }
};

/**
 * üóëÔ∏è Elimina un tipo de documento
 * @param {number|string} id - ID del tipo de documento
 */
export const deleteTipoDocumento = async (id) => {
  try {
    const response = await fetch(`${API_BASE}/tipos-documento/${id}`, {
      method: "DELETE",
      headers: getHeaders(true),
    });
    return await handleResponse(response);
  } catch (error) {
    console.error(`‚ùå Error eliminando tipo de documento ${id}:`, error);
    throw error;
  }
};