<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Disponibilidad M茅dica - Registro Mensual</title>

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 15px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      overflow: hidden;
    }

    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      text-align: center;
    }

    .header h1 { font-size: 28px; margin-bottom: 10px; }
    .header p { opacity: 0.9; font-size: 14px; }

    .form-section { padding: 30px; }

    .info-section {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 10px;
    }

    .form-group { display: flex; flex-direction: column; }

    .form-group label {
      font-weight: 600;
      color: #333;
      margin-bottom: 8px;
      font-size: 14px;
    }

    .form-group select,
    .form-group input {
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
      transition: all 0.3s;
    }

    .form-group select:focus,
    .form-group input:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .calendar-section { margin-top: 30px; }

    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding: 15px;
      background: #667eea;
      color: white;
      border-radius: 10px;
    }

    .calendar-header h2 { font-size: 20px; }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 10px;
      margin-bottom: 30px;
    }

    .day-header {
      text-align: center;
      font-weight: 700;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 8px;
      color: #667eea;
      font-size: 14px;
    }

    .day-cell {
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      padding: 15px;
      min-height: 160px;
      background: white;
      transition: all 0.3s;
      position: relative;
    }

    .day-cell:hover {
      border-color: #667eea;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
    }

    .day-cell.disabled {
      background: #f5f5f5;
      opacity: 0.5;
      pointer-events: none;
    }

    .day-number {
      font-weight: 800;
      color: #667eea;
      margin-bottom: 10px;
      font-size: 16px;
    }

    .schedule-select {
      width: 100%;
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 13px;
      background: white;
      cursor: pointer;
      transition: all 0.3s;
    }

    .schedule-select:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .chip {
      position: absolute;
      top: 10px;
      right: 10px;
      padding: 4px 8px;
      border-radius: 999px;
      font-size: 11px;
      color: white;
      display: none;
    }

    .chip.saving { background: #6c757d; display: inline-block; }
    .chip.ok     { background: #28a745; display: inline-block; }
    .chip.err    { background: #dc3545; display: inline-block; }

    /* ===== Meta por d铆a ===== */
    .day-meta {
      margin-top: 10px;
      font-size: 12px;
      line-height: 1.35;
      color: #333;
      background: #f8f9fa;
      border: 1px solid #eee;
      border-radius: 8px;
      padding: 8px;
    }

    .day-meta.is-empty { opacity: 0.6; }

    .day-meta .meta-row {
      display: flex;
      justify-content: space-between;
      gap: 10px;
    }

    .day-meta .label {
      font-weight: 900;
      color: #667eea;
      margin-right: 6px;
    }

    .day-meta .value {
      flex: 1;
      text-align: right;
      color: #222;
    }

    .day-meta .hours {
      font-weight: 900;
      color: #ff7a00;
    }

    /* ===== Leyenda ===== */
    .legend-section {
      margin-top: 30px;
      padding: 30px;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      border-radius: 15px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
    }

    .legend-section h3 {
      color: #2c3e50;
      margin-bottom: 25px;
      font-size: 22px;
      text-align: center;
      font-weight: 900;
    }

    .legend-tables-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }

    .table-wrapper {
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .table-wrapper:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }

    .table-header {
      padding: 15px;
      text-align: center;
      color: white;
      font-weight: 900;
    }

    .cas-header    { background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%); }
    .t728-header   { background: linear-gradient(135deg, #9C27B0 0%, #7B1FA2 100%); }
    .locador-header{ background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%); }

    .legend-table { width: 100%; border-collapse: collapse; font-size: 13px; }
    .legend-table thead { background: #f8f9fa; }

    .legend-table th {
      padding: 12px 10px;
      text-align: left;
      font-weight: 800;
      color: #495057;
      border-bottom: 2px solid #dee2e6;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .legend-table td {
      padding: 12px 10px;
      color: #495057;
      border-bottom: 1px solid #f0f0f0;
    }

    .legend-table td:first-child {
      font-weight: 900;
      color: #667eea;
      font-size: 15px;
    }

    .legend-table td:last-child {
      color: #ff7a00;
      font-weight: 900;
      text-align: center;
    }

    /* ===== Resumen ===== */
    .summary {
      margin-top: 20px;
      padding: 20px;
      background: #e8f5e9;
      border-radius: 10px;
      border-left: 4px solid #4caf50;
      display: none;
    }

    .summary h3 { color: #2e7d32; margin-bottom: 10px; font-weight: 900; }
    .summary-content { color: #1b5e20; line-height: 1.6; }

    @media (max-width: 768px) {
      .calendar-grid { grid-template-columns: 1fr; }
      .info-section { grid-template-columns: 1fr; }
      .legend-tables-container { grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="header">
      <h1> Registro de Disponibilidad M茅dica</h1>
      <p>Seleccione mes y asigne turnos d铆a por d铆a (se guarda autom谩ticamente)</p>
    </div>

    <div class="form-section">
      <div class="info-section">
        <div class="form-group">
          <label for="id_personal">M茅dico (ID_PERSONAL):</label>
          <input type="number" id="id_personal" placeholder="Ej: 172" required />
        </div>

        <div class="form-group">
          <label for="id_reg_lab">R茅gimen Laboral:</label>
          <select id="id_reg_lab" required>
            <option value="">Seleccione r茅gimen</option>
            <option value="1">CAS</option>
            <option value="2">728</option>
            <option value="3">Locador</option>
          </select>
        </div>

        <div class="form-group">
          <label for="mes">Mes:</label>
          <select id="mes" required>
            <option value="">Seleccione mes</option>
            <option value="1">Enero</option>
            <option value="2">Febrero</option>
            <option value="3">Marzo</option>
            <option value="4">Abril</option>
            <option value="5">Mayo</option>
            <option value="6">Junio</option>
            <option value="7">Julio</option>
            <option value="8">Agosto</option>
            <option value="9">Septiembre</option>
            <option value="10">Octubre</option>
            <option value="11">Noviembre</option>
            <option value="12">Diciembre</option>
          </select>
        </div>

        <div class="form-group">
          <label for="anio">A帽o:</label>
          <input type="number" id="anio" value="2026" min="2024" max="2030" required />
        </div>
      </div>

      <div class="calendar-section" id="calendarSection" style="display:none;">
        <div class="calendar-header">
          <h2 id="calendarTitle">Calendario</h2>
          <span id="regimenLabel"></span>
        </div>
        <div class="calendar-grid" id="calendarGrid"></div>
      </div>

      <div class="legend-section">
        <h3> Leyenda de C贸digos de Horario por R茅gimen</h3>
        <div class="legend-tables-container">
          <div class="table-wrapper">
            <div class="table-header cas-header"><h4> CAS</h4></div>
            <div class="table-container">
              <table class="legend-table">
                <thead><tr><th>C贸digo</th><th>Descripci贸n</th><th>Horas</th></tr></thead>
                <tbody id="legendTableCAS"></tbody>
              </table>
            </div>
          </div>

          <div class="table-wrapper">
            <div class="table-header t728-header"><h4> 728</h4></div>
            <div class="table-container">
              <table class="legend-table">
                <thead><tr><th>C贸digo</th><th>Descripci贸n</th><th>Horas</th></tr></thead>
                <tbody id="legendTable728"></tbody>
              </table>
            </div>
          </div>

          <div class="table-wrapper">
            <div class="table-header locador-header"><h4> Locador</h4></div>
            <div class="table-container">
              <table class="legend-table">
                <thead><tr><th>C贸digo</th><th>Descripci贸n</th><th>Horas</th></tr></thead>
                <tbody id="legendTableLocador"></tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <div class="summary" id="summary">
        <h3> Resumen</h3>
        <div class="summary-content" id="summaryContent"></div>
      </div>
    </div>
  </div>

  <script src="codigo5.js"></script>
</body>
</html>
